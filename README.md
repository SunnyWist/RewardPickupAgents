# マルチエージェントで報酬を保管庫まで運ぶ問題
## 0. まずはじめに
- このリポジトリを`git clone`してください。
- 以下のプログラムは**Python 3.9.18**で動作確認をしています。
## 1. 目的
- エージェント全体が協力して、2次元グリッド空間上にランダムに配置される**報酬をなるべく多く保管庫まで運ぶ**ことを目的とする。
- このときのエージェント同士が衝突することなく、より多くの報酬を保管庫まで運ぶための経路計画プログラムを作成する。
## 2. 環境
- 事前に2次元グリッド空間上に障害物、報酬の保管庫およびエージェントが配置される。
- 2次元グリッド空間上のそれぞれのノードは、各時刻において事前に決められた確率に従って報酬が配置されるかどうかが決定される。
- エージェントが報酬の配置されたノード上に到達すると、その報酬を持つことができる。
- エージェントは複数の報酬を持つことができるが、一度に持つことのできる報酬の数は決まった数で制限されている。
- エージェントは保管庫に到達すると、持っている報酬を保管庫に納めることができる。

以下は具体的な環境の例である。
```
.,.,.,.,.,.,.,.,.
.,#,#,#,.,#,#,#,.
.,#,.,.,.,.,.,#,.
.,#,.,a,.,a,.,#,.
.,.,.,.,s,.,.,.,.
.,#,.,a,.,a,.,#,.
.,#,.,.,.,.,.,#,.
.,#,#,#,.,#,#,#,.
.,.,.,.,.,.,.,.,.
```
- `.`: PASS_POINT(通行可能なノード)
    - PASS_POINT上には報酬が配置される可能性がある。
- `#`: OBSTACLE(障害物)
- `a`: AGENT(エージェント)
- `s`: STORAGE(報酬の保管庫)

## 3. エージェント
- エージェントは各時刻`t`で以下の行動を取る。
    - 上下左右への移動
    - その場にとどまる

## 4. 経路計画プログラム
- エージェントが報酬を保管庫まで運ぶための効率の良い経路計画プログラムを作成する。
- 経路計画プログラムは```RewardPickupAgents/PathPlanner```上に```PathPlanner```**クラスを継承して**作成する。
- 作成したら、そのクラス名に対応するように```RewardPickupAgents/__init__.py```のimport文を変更する。
    - 経路計画プログラムを`Hoge.py`上に`Fuga`クラスとして作成した場合、`from .PathPlanner.RandomWalk import RandomWalk as PathPlanner`を`from .PathPlanner.Hoge import Fuga as PathPlanner`に変更する
- 経路計画プログラムの作成時には以下の情報を利用して良い。
    - 引数として与えられる`World`クラスのインスタンス`world`のメソッド([一覧](/docs/World.md))
        - `world`インスタンスの変数は利用してはならない
    - `util.py`に定義されている関数([一覧](/docs/util.md))
- 作成したら、`python3 main.py`を実行することで、エージェントの動作を確認することができる。
    - `RewardPickupAgents/parameter.py`上のパラメータを変更することで、実行時の設定を変更できる。
        - シミュレーションを行うステップ数: `MAX_STEP`
        - ターミナルにマップを表示するかどうか: `PRINT_MAP_IN_TEMINAL`

## 5. 評価
- エージェント全体が保管庫まで運んだ報酬の数を評価する。
- 保管庫まで運べた報酬の数が多いほど、高い評価とする。
- 評価時のパラメータは以下の通り。(変更の可能性あり)
    - シミュレーションを行うステップ数: `MAX_STEP=100`
    - エージェント数: `NUM_AGENTS=4`
    - 一度に持つことのできる報酬の数: `MAXIMUM_REWARD=3`
    - マップのサイズ: `9x9`
    - 報酬の出てくる確率: 未定
- 以上のパラメータの設定に依らないような経路計画プログラムを作成することが望ましい。

## 6. その他
- ランダムウォーク`RewardPickupAgents/PathPlanner/RandomWalk.py`による評価値は8~25くらいです。